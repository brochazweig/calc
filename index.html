<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            max-width: 600px;
        }
        input, select {
            margin-bottom: 10px;
            padding: 10px;
            width: 100%;
        }
        button {
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .result {
            margin-top: 20px;
            font-weight: bold;
        }
    </style>
</head>
<body>

<h2>Calculate CFS Level and Earnings</h2>

<label for="location">Select Location:</label>
<select id="location">
    <option value="Slovakia">Slovakia</option>
    <option value="Greece">Greece</option>
    <option value="Antwerp">Antwerp</option>
    <option value="Netherlands">Netherlands</option>
    <option value="Hartford">Hartford</option>
    <option value="Philadelphia">Philadelphia</option>
    <option value="Detroit">Detroit</option>
    <option value="Rockville">Rockville</option>
    <option value="Cleveland">Cleveland</option>
    <option value="Columbus">Columbus</option>
    <option value="Cincinnati">Cincinnati</option>
    <option value="Portland">Portland</option>
    <option value="San Francisco Regional">San Francisco Regional</option>
    <option value="San Francisco">San Francisco</option>
    <option value="Brazil">Brazil</option>
    <option value="Australia">Australia</option>
    <option value="London">London</option>
    <option value="Brussels">Brussels</option>
    <option value="ADIAM">ADIAM</option>
    <option value="CASIP">CASIP</option>
    <option value="CASIM">CASIM</option>
    <option value="Croatia">Croatia</option>
</select>

<label for="has">Enter HAS:</label>
<select id="has">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select>

<label for="daf">Enter DAF:</label>
<select id="daf">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
</select>

<label for="maf">Enter MAF:</label>
<select id="maf">
    <option value="Yes">Yes</option>
    <option value="No">No</option>
    <option value="MAF 105+">MAF 105+</option>
</select>

<label for="govHours">Enter Government Hours (0 to 168):</label>
<input type="number" id="govHours" min="0" max="168">

<button onclick="calculate()">Calculate</button>

<div class="result" id="result"></div>

<script>
function calculateMaxHours(has, daf, maf) {
    if (has >= 1 && has <= 3 && daf == 1) return 4;
    else if (has >= 1 && has <= 3 && daf == 2) return 10;
    else if (has >= 1 && has <= 3 && daf == 3) return 25;
    else if (has == 3 && (daf == 4 || daf == 5 || daf == 6)) return 25;
    else if (has <= 2 && daf == 4) return maf === "Yes" ? 84 : 40;
    else if (has <= 2 && daf == 5) return maf === "Yes" ? 105 : 40;
    else if (has == 1 && daf == 6) {
        if (maf === "Yes") return 105;
        else if (maf === "MAF 105+") return 168;
        else return 40;
    }
    return 0;
}

function determineCFSLevel(currentAllowableHours, maf) {
    if (currentAllowableHours < 4) return 1;
    else if (currentAllowableHours < 10) return 2;
    else if (currentAllowableHours < 25) return 3;
    else if (currentAllowableHours < 40) return 4;
    else if (maf === "Yes" && currentAllowableHours < 44) return 5.1;
    else if (maf === "Yes" && currentAllowableHours < 64) return 5.2;
    else if (maf === "Yes" && currentAllowableHours < 84) return 5.3;
    else if (maf === "Yes" && currentAllowableHours >= 84) return 6;
    else if (maf === "MAF 105+" && currentAllowableHours < 125) return 7.1;
    else if (maf === "MAF 105+" && currentAllowableHours < 145) return 7.2;
    else if (maf === "MAF 105+" && currentAllowableHours >= 145) return 7.3;
    return 0;
}

function calculate() {
    const location = document.getElementById("location").value;
    const has = parseInt(document.getElementById("has").value);
    const daf = parseInt(document.getElementById("daf").value);
    const maf = document.getElementById("maf").value;
    const governmentHours = parseInt(document.getElementById("govHours").value);

    if (isNaN(governmentHours) || governmentHours < 0 || governmentHours > 168) {
        alert("Invalid government hours. Please enter a value between 0 and 168.");
        return;
    }

    const maxHours = calculateMaxHours(has, daf, maf);
    const currentAllowableHours = maxHours - governmentHours;

    // Check for negative current allowable hours
    if (currentAllowableHours < 0) {
        document.getElementById("result").innerHTML = "Please review your entries.";
        return;
    }

    const cfsLevel = determineCFSLevel(currentAllowableHours, maf);

    // Updated earning structure based on provided levels
    const earningStructure = {
        "Slovakia": [32, 80, 200, 319, 351, 510, 670, 838, 998, 1157, 1341],
        "Greece": [46, 114, 286, 459, 508, 739, 970, 1202, 1432, 1661, 1925],
        "Antwerp": [105, 261, 651, 1042, 1150, 1672, 2195, 2734, 3255, 3775, 4375],
        "Netherlands": [105, 261, 651, 1042, 1150, 1672, 2195, 2734, 3255, 3775, 4375],
        "Hartford": [124, 310, 774, 1240, 1368, 1989, 2610, 3253, 3873, 4493, 5206],
        "Philadelphia": [124, 310, 774, 1240, 1368, 1989, 2610, 3253, 3873, 4493, 5206],
        "Detroit": [124, 310, 774, 1240, 1368, 1989, 2610, 3253, 3873, 4493, 5206],
        "Rockville": [124, 310, 774, 1240, 1368, 1989, 2610, 3253, 3873, 4493, 5206],
        "Cleveland": [218, 545, 1362, 2179, 2398, 3487, 4576, 5720, 6809, 7898, 9152],
        "Columbus": [124, 310, 775, 1240, 1364, 1983, 2603, 3254, 3873, 4493, 5206],
        "Cincinnati": [181, 451, 1128, 1805, 1986, 2889, 3791, 4739, 5642, 6544, 7583],
        "Portland": [224, 560, 1401, 2241, 2466, 3587, 4707, 5883, 7003, 8123, 9413],
        "San Francisco Regional": [217, 543, 1358, 2172, 2390, 3475, 4561, 5702, 6788, 7873, 9123],
        "San Francisco": [200, 499, 1247, 1995, 2196, 3193, 4190, 5238, 6235, 7232, 8380],
        "Brazil": [19, 48, 119, 191, 210, 306, 401, 502, 597, 693, 803],
        "Australia": [386, 965, 2412, 3860, 4248, 6177, 8106, 10132, 12062, 13991, 16212],
        "London": [112, 280, 700, 1121, 1233, 1793, 2353, 2942, 3502, 4062, 4707],
        "Brussels": [87, 218, 545, 872, 959, 1394, 1830, 2288, 2724, 3159, 3661],
        "ADIAM": [162, 405, 1012, 1619, 1781, 2590, 3399, 4249, 5058, 5867, 6798],
        "CASIP": [131, 327, 818, 1309, 1440, 2095, 2749, 3437, 4091, 4746, 5499],
        "CASIM": [154, 384, 960, 1536, 1690, 2457, 3225, 4032, 4800, 5567, 6451],
        "Croatia": [51, 128, 319, 511, 562, 817, 1072, 1340, 1595, 1850, 2144]
    };

    // Get the appropriate earning based on CFS Level
    const earningLevel = Math.ceil(cfsLevel);
    const amountEarned = earningStructure[location][earningLevel - 1] || 0; // -1 for zero-based index

    document.getElementById("result").innerHTML = `
        Current Allowable Hours: ${currentAllowableHours}<br>
        CFS Level: ${cfsLevel}<br>
        Amount Earned in ${location}: ${amountEarned}
    `;
}
</script>

</body>
</html>
